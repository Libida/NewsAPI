!function(e){var t={};function s(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=1)}([function(e,t,s){},function(e,t,s){"use strict";s.r(t);s(0);const n="news-categories",r="news-container",i="global-spinner",o="modal",a="modal-text",c="modal-heading-close",l="backdrop",d="hidden",h="https://static.thenounproject.com/png/340719-200.png";var u=class{constructor(){this.spinner=document.getElementById(i)}};var w=class{constructor(e){this.view=e}startLoading(e,t){e&&e(),this.view.spinner.classList.remove(d),t&&t()}finishLoading(e,t){e&&e(),this.view.spinner.classList.add(d),t&&t()}};let v;var p=class{constructor(){return v||((v=this).view=new u,v.controller=new w(v.view)),v}};var m=class{constructor(e){this.id=e,this.dropdown=document.getElementById(e)}};var f=class{constructor(e,t){this.view=e,this.addListeners(t)}addListeners(e={}){const{changeCallback:t}=e;t&&this.view.dropdown.addEventListener("change",t)}};var g=class{constructor(e,t){this.view=new m(e),this.controller=new f(this.view,t)}};var b=class{constructor(){this.container=document.getElementById(r),this.dropdown=new g(n),this.spinner=new p}getNewsArticleMarkup(e){const{url:t,urlToImage:s,title:n,description:r}=e;return`\n            <article class="news-article">\n                <a class="news-article-link" href="${t}" target="_blank">\n                    <div class="news-article-additional-content">\n                        <img class="news-article-img" src="${s||h}" alt="${n}">\n                    </div>\n                    <div class="news-article-main-content">\n                        <h3 class="news-article-title">${n}</h3>\n                        <p class="news-article-location">${r}</p>\n                    </div>\n                </a>\n            </article>\n            `}appendNews(e){for(let t in e)this.container.insertAdjacentHTML("beforeend",this.getNewsArticleMarkup(e[t]))}clearNews(){this.container.innerHTML=""}};var y=class{constructor(){this.create(),this.backdrop=document.getElementById(l)}create(){document.body.insertAdjacentHTML("beforeend",`<div class="backdrop hidden" id="${l}"></div>`)}};var L=class{constructor(e){this.view=e}show(){this.view.backdrop.classList.remove(d)}hide(){this.view.backdrop.classList.add(d)}};let k=null;var x=class{constructor(e){return k||((k=this).view=new y,k.controller=new L(k.view)),k}};var E=class{constructor(e){this.create(),this.modal=document.getElementById(o),this.errorText=document.getElementById(a),this.errorClose=document.getElementById(c),this.backdrop=new x}create(){const e=`\n                <div class="modal ${d}" id="${o}">\n                    <div class="modal-heading">\n                        <h2>Attention</h2>\n                        <a href="#" class="${c}" id="${c}">Close</a>\n                    </div>\n                    <p class="modal-text" id="${a}"></p>\n                </div>\n                `;document.body.insertAdjacentHTML("beforeend",e)}getText(){return this.text}setText(e="Could you please retry later."){this.getText!==e&&(this.errorText.textContent=e,this.text=e)}};var T=class{constructor(e){this.view=e,this.initListeners()}initListeners(){this.view.errorClose.addEventListener("click",this.close.bind(this))}open(){this.view.modal.classList.remove(d),this.view.backdrop.controller.show()}close(e){e.preventDefault(),this.view.modal.classList.add(d),this.view.backdrop.controller.hide()}};let j=null;var $=class{constructor(e){return j||((j=this).view=new E,j.controller=new T(j.view)),j.view.setText(e),j.controller.open(),j}};var N=class{constructor(e,t,s={}){this.model=e,this.view=t,this.addListeners()}addListeners(){this.view.dropdown.controller.addListeners({changeCallback:this.updateNews.bind(this)})}async updateNews(e){this.view.spinner.controller.startLoading(this.view.clearNews.bind(this.view));const t=this.model.getNews(e.target.value),s=await t||{};this.view.appendNews(s.articles),this.view.spinner.controller.finishLoading()}};var M=class{constructor(e,t={}){this.promiseRequest=this.makeRequest(e,t)}async makeRequest(e,t){return fetch(e,t)}async waitForRequest(e){try{let t=await this.promiseRequest;return e?e(t):t}catch(e){new $(e)}}};var I=class{async getNews(e,t){return new M(`https://newsapi.org/v2/everything?q=${e}&sortBy=popularity&apiKey=a1e2ae38e5ff42f1aa3175998837d6ca&from=2019-10-24&to=2019-10-24`,t).waitForRequest(this.handleErrors.bind(this))}handleErrors(e){if(200!=e.status)throw new SyntaxError("Empty results from the NEWS API server");return e.json()}};new class{constructor(e){this.model=new I,this.view=new b,this.controller=new N(this.model,this.view,e)}}}]);